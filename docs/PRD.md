# 커피 주문 앱

## 1. 프로젝트 개용

### 1.1 프로젝트명
커피 주문 앱

### 1.2 프로젝트 목적
사용자가 커피 메뉴를 주문하고, 관리자가 주문을 관리할 수 있는 간단한 풀스택 웹 앱

### 1.3 개발 범위
- 주문하기 화면(메뉴 선택 및 장바구니 가능)
- 관리자 화면(재고 관리 및 주문 상태 관리)
- 데이터를 생성/조회/수정/삭제할 수 있는 기능

## 2. 기술 스택
- 프런트엔드 : HTML, CSS, 리엑트, 자바스크립트 
- 백엔드 : Node.js, Express
- 데이터베이스 : PostgreSQL

## 3. 기본 사항
- 프런트엔드와 백엔드를 따로 개발
- 기본적인 웹 기술만 사용
- 학습 목저이므로 사용자 인증이나 결재 기능은 제외
- 메뉴는 커피 메뉴만 있음

## 4. 프런트엔드 UI 상세 명세

### 4.1 주문하기 화면

#### 4.1.1 화면 개요
고객이 커피 메뉴를 선택하고 옵션을 추가하여 주문할 수 있는 메인 화면

#### 4.1.2 화면 구성 요소

##### 헤더 영역
- **브랜드명**: "COZY" 로고 좌측 상단 표시
- **네비게이션 탭**: 
  - "주문하기" 버튼 (현재 화면)
  - "관리자" 버튼 (관리자 화면으로 이동)

##### 메뉴 카드 영역
메뉴는 그리드 형식으로 3개씩 배열되며, 각 메뉴 카드는 다음 요소를 포함:

**메뉴 카드 구성**:
1. **상품 이미지 영역**
   - placeholder 이미지 또는 실제 메뉴 이미지 표시
   - 고정된 비율 유지

2. **메뉴 정보**
   - 메뉴명 (예: "아메리카노(ICE)", "아메리카노(HOT)", "카페라떼")
   - 기본 가격 (예: "4,000원", "5,000원")
   - 간단한 설명 (예: "간단한 설명...")

3. **옵션 선택 영역**
   - 샷 추가 체크박스: "샷 추가 (+500원)"
   - 시럽 추가 체크박스: "시럽 추가 (+0원)"
   - 체크박스는 다중 선택 가능

4. **담기 버튼**
   - 메뉴를 장바구니에 추가하는 버튼
   - 버튼 레이블: "담기"

**초기 메뉴 데이터**:
- 아메리카노(ICE): 4,000원
- 아메리카노(HOT): 4,000원
- 카페라떼: 5,000원

##### 장바구니 영역
화면 하단에 고정 표시되는 장바구니 섹션:

1. **장바구니 제목**
   - "장바구니" 텍스트 표시

2. **주문 내역 리스트**
   - 선택한 메뉴명 (옵션 표시 포함)
   - 수량 (예: "X 1", "X 2")
   - 개별 금액 (예: "4,500원", "8,000원")
   - 옵션이 있는 경우 메뉴명 옆에 표시 (예: "아메리카노(ICE) (샷 추가)")

3. **총 금액 표시**
   - "총 금액" 레이블
   - 전체 주문 금액 (예: "12,500원")
   - 우측 정렬, 강조 표시

4. **주문하기 버튼**
   - 주문을 완료하는 버튼
   - 버튼 레이블: "주문하기"

#### 4.1.3 기능 명세

##### F1. 메뉴 선택
- **설명**: 사용자가 메뉴 카드에서 원하는 커피를 선택
- **입력**: 메뉴 카드의 "담기" 버튼 클릭
- **처리**:
  1. 선택한 옵션 확인 (샷 추가, 시럽 추가)
  2. 옵션에 따른 최종 가격 계산
  3. 장바구니에 해당 메뉴 추가
  4. 총 금액 업데이트
- **출력**: 장바구니 영역에 선택한 메뉴 추가 표시

##### F2. 옵션 선택
- **설명**: 메뉴에 추가 옵션을 선택
- **입력**: 체크박스 선택/해제
- **옵션 종류**:
  - 샷 추가: +500원
  - 시럽 추가: +0원 (무료)
- **처리**: 체크박스 상태 토글
- **출력**: 체크박스 선택 상태 변경

##### F3. 장바구니 관리
- **설명**: 장바구니에 담긴 메뉴 확인
- **표시 정보**:
  - 각 주문 항목의 메뉴명, 옵션, 수량, 금액
  - 전체 주문의 총 금액
- **계산 로직**:
  - 개별 메뉴 금액 = 기본 가격 + 옵션 가격
  - 총 금액 = Σ(개별 메뉴 금액 × 수량)

##### F4. 주문 완료
- **설명**: 장바구니의 메뉴를 주문으로 제출
- **입력**: "주문하기" 버튼 클릭
- **전제 조건**: 장바구니에 1개 이상의 메뉴 존재
- **처리**:
  1. 장바구니 데이터를 백엔드 API로 전송
  2. 주문 생성 요청
  3. 주문 번호 및 상태 수신
- **출력**: 
  - 성공 시: 주문 완료 메시지, 장바구니 초기화
  - 실패 시: 오류 메시지 표시

##### F5. 화면 전환
- **설명**: 네비게이션 탭을 통한 화면 이동
- **입력**: "주문하기" 또는 "관리자" 버튼 클릭
- **처리**: 해당 화면으로 라우팅
- **출력**: 선택한 화면 표시

#### 4.1.4 UI/UX 고려사항

1. **반응형 디자인**
   - 메뉴 카드는 화면 크기에 따라 그리드 레이아웃 조정
   - 모바일: 1열, 태블릿: 2열, 데스크톱: 3열

2. **사용자 피드백**
   - "담기" 버튼 클릭 시 시각적 피드백 (애니메이션 또는 색상 변경)
   - 장바구니에 항목 추가 시 부드러운 전환 효과

3. **접근성**
   - 모든 버튼과 체크박스는 키보드 네비게이션 지원
   - 명확한 레이블과 충분한 클릭 영역

4. **오류 처리**
   - 빈 장바구니로 주문 시도 시 안내 메시지 표시
   - API 통신 실패 시 사용자 친화적인 오류 메시지

#### 4.1.5 API 연동

##### 메뉴 조회 API
- **Endpoint**: `GET /api/menus`
- **응답 데이터**:
```json
[
  {
    "id": 1,
    "name": "아메리카노(ICE)",
    "price": 4000,
    "description": "간단한 설명",
    "image_url": "/images/americano-ice.jpg"
  },
  ...
]
```

##### 주문 생성 API
- **Endpoint**: `POST /api/orders`
- **요청 데이터**:
```json
{
  "items": [
    {
      "menu_id": 1,
      "quantity": 1,
      "options": ["샷 추가"]
    },
    ...
  ],
  "total_amount": 12500
}
```
- **응답 데이터**:
```json
{
  "order_id": 1,
  "status": "pending",
  "created_at": "2025-10-29T10:30:00Z"
}
```

#### 4.1.6 상태 관리
- 메뉴 목록 상태
- 장바구니 상태 (선택한 메뉴 및 옵션)
- 총 금액 상태
- 로딩 상태 (API 통신 중)
- 오류 상태

### 4.2 관리자 화면

#### 4.2.1 화면 개요
관리자가 주문 상태를 관리하고 메뉴 재고를 관리할 수 있는 관리 화면

#### 4.2.2 화면 구성 요소

##### 헤더 영역
- **브랜드명**: "COZY" 로고 좌측 상단 표시
- **네비게이션 탭**: 
  - "주문하기" 버튼 (주문하기 화면으로 이동)
  - "관리자" 버튼 (현재 화면)

##### 관리자 대시보드 영역
주문 현황을 한눈에 파악할 수 있는 요약 정보:

1. **대시보드 제목**
   - "관리자 대시보드" 텍스트 표시

2. **주문 통계 표시**
   - 총 주문: 전체 주문 수 (예: "총 주문 1")
   - 주문 접수: 접수된 주문 수 (예: "주문 접수 1")
   - 제조 중: 제조 중인 주문 수 (예: "제조 중 0")
   - 제조 완료: 완료된 주문 수 (예: "제조 완료 0")
   - 통계는 실시간으로 업데이트

##### 재고 현황 영역
메뉴별 재고 수량을 확인하고 조정할 수 있는 섹션:

1. **재고 현황 제목**
   - "재고 현황" 텍스트 표시

2. **재고 카드 구성**
   각 메뉴당 하나의 재고 카드를 표시하며, 그리드 형식으로 3개씩 배열:
   
   - 메뉴명 (예: "아메리카노 (ICE)", "아메리카노 (HOT)", "카페라떼")
   - 현재 재고 수량 (예: "10개")
   - 증가/감소 버튼:
     * "+" 버튼: 재고 1개 증가
     * "-" 버튼: 재고 1개 감소

3. **초기 재고 수량**
   - 모든 메뉴: 10개

##### 주문 현황 영역
접수된 주문 목록과 상태를 관리하는 섹션:

1. **주문 현황 제목**
   - "주문 현황" 텍스트 표시

2. **주문 리스트**
   각 주문 항목은 다음 정보를 포함:
   
   - **주문 시간**: 주문 접수 일시 (예: "7월 31일 13:00")
   - **주문 내역**: 메뉴명 x 수량 (예: "아메리카노(ICE) x 1")
   - **주문 금액**: 해당 주문의 총액 (예: "4,000원")
   - **상태 변경 버튼**: 
     * 주문 접수 상태: "주문 접수" 버튼 표시
     * 버튼 클릭 시 다음 상태로 변경

3. **주문 표시 형식**
   - 최신 주문이 상단에 표시 (역순 정렬)
   - 스크롤 가능한 리스트 형태

#### 4.2.3 기능 명세

##### F1. 대시보드 통계 조회
- **설명**: 주문 상태별 통계를 실시간으로 표시
- **입력**: 화면 진입 또는 주기적 갱신
- **처리**:
  1. 백엔드 API에서 주문 통계 데이터 조회
  2. 상태별 주문 수 계산
  3. 대시보드에 표시
- **출력**: 
  - 총 주문 수
  - 주문 접수 수
  - 제조 중 수
  - 제조 완료 수

##### F2. 재고 조회
- **설명**: 모든 메뉴의 현재 재고 수량 표시
- **입력**: 화면 진입
- **처리**: 백엔드 API에서 재고 정보 조회
- **출력**: 메뉴별 재고 수량 표시

##### F3. 재고 증가
- **설명**: 특정 메뉴의 재고를 1개 증가
- **입력**: "+" 버튼 클릭
- **처리**:
  1. 해당 메뉴의 재고 수량 +1
  2. 백엔드 API로 재고 업데이트 요청
  3. 성공 시 화면 갱신
- **출력**: 
  - 성공 시: 증가된 재고 수량 표시
  - 실패 시: 오류 메시지 표시
- **제약사항**: 최대 재고 제한 (예: 100개) 고려 가능

##### F4. 재고 감소
- **설명**: 특정 메뉴의 재고를 1개 감소
- **입력**: "-" 버튼 클릭
- **처리**:
  1. 해당 메뉴의 재고 수량 -1
  2. 백엔드 API로 재고 업데이트 요청
  3. 성공 시 화면 갱신
- **출력**: 
  - 성공 시: 감소된 재고 수량 표시
  - 실패 시: 오류 메시지 표시
- **제약사항**: 재고가 0인 경우 감소 불가

##### F5. 주문 목록 조회
- **설명**: 모든 주문 내역을 시간순으로 표시
- **입력**: 화면 진입 또는 주기적 갱신
- **처리**:
  1. 백엔드 API에서 주문 목록 조회
  2. 최신순으로 정렬
  3. 주문 정보 표시
- **출력**: 주문 시간, 내역, 금액, 상태별 버튼

##### F6. 주문 상태 변경
- **설명**: 주문의 상태를 다음 단계로 변경
- **입력**: 상태 변경 버튼 클릭
- **상태 흐름**:
  1. pending (주문 접수 대기) → "주문 접수" 버튼
  2. accepted (주문 접수) → "제조 시작" 버튼
  3. preparing (제조 중) → "제조 완료" 버튼
  4. completed (제조 완료) → 버튼 없음 (최종 상태)
- **처리**:
  1. 해당 주문의 상태를 다음 단계로 변경
  2. 백엔드 API로 상태 업데이트 요청
  3. 성공 시 대시보드 통계 및 주문 목록 갱신
- **출력**:
  - 성공 시: 변경된 상태 및 버튼 표시
  - 실패 시: 오류 메시지 표시

##### F7. 실시간 데이터 갱신
- **설명**: 주문 및 재고 정보를 주기적으로 업데이트
- **입력**: 자동 (타이머 기반 또는 WebSocket)
- **갱신 주기**: 5-10초 간격 (설정 가능)
- **처리**: 
  1. 대시보드 통계 갱신
  2. 주문 목록 갱신
  3. 재고 현황 갱신
- **출력**: 최신 데이터 반영

##### F8. 화면 전환
- **설명**: 네비게이션 탭을 통한 화면 이동
- **입력**: "주문하기" 또는 "관리자" 버튼 클릭
- **처리**: 해당 화면으로 라우팅
- **출력**: 선택한 화면 표시

#### 4.2.4 UI/UX 고려사항

1. **실시간 업데이트**
   - 새로운 주문 접수 시 시각적 알림 (배지, 색상 변경 등)
   - 부드러운 화면 전환 효과

2. **반응형 디자인**
   - 재고 카드는 화면 크기에 따라 그리드 레이아웃 조정
   - 모바일: 1열, 태블릿: 2열, 데스크톱: 3열

3. **사용자 피드백**
   - 버튼 클릭 시 즉각적인 시각적 피드백
   - 재고 변경 시 애니메이션 효과
   - 상태 변경 시 확인 메시지 (옵션)

4. **접근성**
   - 모든 버튼은 키보드 네비게이션 지원
   - 명확한 레이블과 충분한 클릭 영역
   - 색상만으로 정보를 전달하지 않음 (텍스트 병기)

5. **오류 처리**
   - API 통신 실패 시 재시도 옵션 제공
   - 재고 0 이하로 감소 시도 시 안내 메시지
   - 네트워크 오류 시 사용자 친화적인 메시지

6. **성능 최적화**
   - 주문 목록이 많을 경우 페이지네이션 또는 가상 스크롤링
   - 불필요한 API 호출 최소화

#### 4.2.5 API 연동

##### 대시보드 통계 조회 API
- **Endpoint**: `GET /api/admin/dashboard`
- **응답 데이터**:
```json
{
  "total_orders": 1,
  "pending_orders": 1,
  "preparing_orders": 0,
  "completed_orders": 0
}
```

##### 재고 조회 API
- **Endpoint**: `GET /api/admin/inventory`
- **응답 데이터**:
```json
[
  {
    "menu_id": 1,
    "menu_name": "아메리카노(ICE)",
    "stock": 10
  },
  {
    "menu_id": 2,
    "menu_name": "아메리카노(HOT)",
    "stock": 10
  },
  {
    "menu_id": 3,
    "menu_name": "카페라떼",
    "stock": 10
  }
]
```

##### 재고 업데이트 API
- **Endpoint**: `PATCH /api/admin/inventory/:menu_id`
- **요청 데이터**:
```json
{
  "stock_change": 1  // 또는 -1
}
```
- **응답 데이터**:
```json
{
  "menu_id": 1,
  "new_stock": 11,
  "updated_at": "2025-10-29T10:30:00Z"
}
```

##### 주문 목록 조회 API
- **Endpoint**: `GET /api/admin/orders`
- **쿼리 파라미터**: 
  - `status` (옵션): pending, accepted, preparing, completed
  - `limit` (옵션): 페이지당 항목 수
  - `offset` (옵션): 페이지네이션 오프셋
- **응답 데이터**:
```json
[
  {
    "order_id": 1,
    "created_at": "2025-07-31T13:00:00Z",
    "items": [
      {
        "menu_name": "아메리카노(ICE)",
        "quantity": 1,
        "options": []
      }
    ],
    "total_amount": 4000,
    "status": "pending"
  }
]
```

##### 주문 상태 변경 API
- **Endpoint**: `PATCH /api/admin/orders/:order_id/status`
- **요청 데이터**:
```json
{
  "status": "accepted"  // pending → accepted → preparing → completed
}
```
- **응답 데이터**:
```json
{
  "order_id": 1,
  "status": "accepted",
  "updated_at": "2025-10-29T10:30:00Z"
}
```

#### 4.2.6 상태 관리
- 대시보드 통계 상태 (총 주문, 상태별 주문 수)
- 재고 목록 상태 (메뉴별 재고 수량)
- 주문 목록 상태 (전체 주문 내역)
- 로딩 상태 (API 통신 중)
- 오류 상태
- 갱신 타이머 상태 (실시간 업데이트용)

#### 4.2.7 주문 상태 정의

| 상태 코드 | 상태명 | 설명 | 버튼 레이블 |
|---------|--------|------|------------|
| pending | 주문 접수 대기 | 고객이 주문을 완료한 초기 상태 | 주문 접수 |
| accepted | 주문 접수 | 관리자가 주문을 확인하고 접수한 상태 | 제조 시작 |
| preparing | 제조 중 | 주문한 메뉴를 제조 중인 상태 | 제조 완료 |
| completed | 제조 완료 | 주문이 완료되어 고객에게 전달 가능한 상태 | (버튼 없음) |

